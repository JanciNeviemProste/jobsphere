# ============================================
# JobSphere Environment Configuration
# ============================================
# Copy this file to .env and fill in your values

# ----------------- APP CONFIG -----------------
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
API_URL=http://localhost:4000
PORT=4000
HOST=0.0.0.0

# ----------------- DATABASE -----------------
DATABASE_URL="postgresql://jobsphere:jobsphere_dev_2024@localhost:5432/jobsphere?schema=public"
DATABASE_POOL_URL="postgresql://jobsphere:jobsphere_dev_2024@localhost:6433/jobsphere?schema=public"

# ----------------- REDIS -----------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""

# ----------------- SECURITY -----------------
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
SESSION_SECRET="your-session-secret-change-in-production"
COOKIE_SECRET="your-cookie-secret-change-in-production"
CSRF_SECRET="your-csrf-secret-change-in-production"

# Two-Factor Auth
TOTP_ENCRYPTION_KEY="your-totp-encryption-key"

# ----------------- AI & EMBEDDINGS -----------------
# Anthropic Claude API
ANTHROPIC_API_KEY="sk-ant-api03-..."

# Embeddings Provider (optional - for vector search)
EMBEDDINGS_PROVIDER="xenova" # or "openai", "cohere"
EMBEDDINGS_MODEL="Xenova/multilingual-e5-base"
OPENAI_API_KEY="" # if using OpenAI embeddings
COHERE_API_KEY="" # if using Cohere embeddings

# ----------------- EMAIL PROVIDERS -----------------
# Microsoft Graph (Office 365)
GRAPH_TENANT_ID="your-tenant-id"
GRAPH_CLIENT_ID="your-client-id"
GRAPH_CLIENT_SECRET="your-client-secret"
GRAPH_REDIRECT_URI="http://localhost:3000/api/auth/callback/microsoft"

# Gmail API
GMAIL_CLIENT_ID="your-client-id.apps.googleusercontent.com"
GMAIL_CLIENT_SECRET="your-client-secret"
GMAIL_REDIRECT_URI="http://localhost:3000/api/auth/callback/google"

# SMTP Settings (fallback)
SMTP_HOST="localhost"
SMTP_PORT="1025"
SMTP_USER="no-reply@jobsphere.com"
SMTP_PASS="smtp-password"
SMTP_FROM="JobSphere <no-reply@jobsphere.com>"

# IMAP Settings (fallback)
IMAP_HOST="localhost"
IMAP_PORT="993"
IMAP_USER="inbox@jobsphere.com"
IMAP_PASS="imap-password"
IMAP_TLS="true"

# Transactional Email Service
EMAIL_PROVIDER="mailhog" # "ses", "sendgrid", "mailgun", "mailhog" for development
SENDGRID_API_KEY=""
MAILGUN_API_KEY=""
MAILGUN_DOMAIN=""
AWS_SES_REGION="eu-west-1"
AWS_SES_ACCESS_KEY=""
AWS_SES_SECRET_KEY=""

# ----------------- STORAGE (S3/MinIO) -----------------
S3_ENDPOINT="http://localhost:9000"
S3_REGION="eu-west-1"
S3_BUCKET="jobsphere-uploads"
S3_ACCESS_KEY="minioadmin"
S3_SECRET_KEY="minioadmin123"
S3_USE_SSL="false" # true for production

# ----------------- SEARCH -----------------
MEILISEARCH_HOST="http://localhost:7700"
MEILISEARCH_MASTER_KEY="jobsphere_dev_master_key_2024"

# Vector Database (Optional - alternative to pgvector)
QDRANT_URL="http://localhost:6333"
QDRANT_API_KEY=""

# ----------------- BILLING (Stripe) -----------------
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# Price IDs
STRIPE_PRICE_STARTER_EUR="price_..."
STRIPE_PRICE_STARTER_USD="price_..."
STRIPE_PRICE_PRO_EUR="price_..."
STRIPE_PRICE_PRO_USD="price_..."
STRIPE_PRICE_ENTERPRISE_EUR="price_..."

# ----------------- VIRUS SCANNING -----------------
CLAMAV_HOST="localhost"
CLAMAV_PORT="3310"
CLAMAV_TIMEOUT="30000"

# ----------------- CAPTCHA -----------------
CAPTCHA_PROVIDER="hcaptcha" # or "recaptcha"
HCAPTCHA_SITE_KEY="10000000-ffff-ffff-ffff-000000000001" # test key
HCAPTCHA_SECRET_KEY="0x0000000000000000000000000000000000000000" # test key
RECAPTCHA_SITE_KEY=""
RECAPTCHA_SECRET_KEY=""

# ----------------- CDN & EDGE -----------------
CLOUDFLARE_ZONE_ID=""
CLOUDFLARE_API_TOKEN=""
CLOUDFLARE_ACCOUNT_ID=""

# ----------------- MONITORING -----------------
SENTRY_DSN=""
SENTRY_AUTH_TOKEN=""
SENTRY_ORG=""
SENTRY_PROJECT=""

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4318"
OTEL_SERVICE_NAME="jobsphere"

# ----------------- WEBHOOKS -----------------
# Webhook secrets for verification
WEBHOOK_SECRET_STRIPE="whsec_..."
WEBHOOK_SECRET_GITHUB=""
WEBHOOK_SECRET_EMAIL=""

# ----------------- FEATURE FLAGS -----------------
FEATURE_FLAG_PROVIDER="unleash" # or "flagsmith", "launchdarkly"
UNLEASH_URL="http://localhost:4242/api"
UNLEASH_API_KEY=""
FLAGSMITH_API_KEY=""

# ----------------- RATE LIMITING -----------------
RATE_LIMIT_WINDOW_MS="60000" # 1 minute
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_BAN_TIME_MS="300000" # 5 minutes

# ----------------- OAUTH PROVIDERS -----------------
# LinkedIn OAuth
LINKEDIN_CLIENT_ID=""
LINKEDIN_CLIENT_SECRET=""

# GitHub OAuth (for developer profiles)
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# ----------------- WORKER QUEUES -----------------
BULL_REDIS_HOST="localhost"
BULL_REDIS_PORT="6379"
WORKER_CONCURRENCY="5"

# ----------------- GEOCODING -----------------
# For location-based job matching
GEOCODING_API_KEY="" # Google Maps or Mapbox
MAPBOX_ACCESS_TOKEN=""

# ----------------- ANALYTICS -----------------
GOOGLE_ANALYTICS_ID=""
MIXPANEL_TOKEN=""
POSTHOG_API_KEY=""
POSTHOG_HOST="https://app.posthog.com"

# ----------------- DEPLOYMENT -----------------
# Fly.io
FLY_APP_NAME=""
FLY_API_TOKEN=""

# AWS (if using ECS/Fargate)
AWS_REGION="eu-west-1"
AWS_ACCOUNT_ID=""
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# ----------------- BACKUP -----------------
BACKUP_S3_BUCKET=""
BACKUP_ENCRYPTION_KEY=""
DATABASE_BACKUP_SCHEDULE="0 3 * * *" # 3 AM daily